# 华泰周期轮动基金组合构建

步骤：宏观择时、板块轮动、组合优化、落地配置

## 宏观择时

采用量价择时和均线择时判断股票市场多空，调整股债资产比例。

**量价择时：**

1.每月末计算各一级行业的价格同比和12个月累计成交量同比，如果两个指标均环比上升，则看多该行业，记为1，均环比下降则看空该行业，记为-1，其余情况记为0.

2.看多行业数目大于等于5且看空行业数目小于等于5，看多股票，记为1. 反之记为-1，其它记为0.

**均线择时：**

1.每月末计算20日均线和120日均线，20均线在上则看多，20日均线在下则看空。

2.看多行业数目大于等于5且看空行业数目小于等于5，看多股票，记为1. 反之记为-1，其它记为0.

用两种方法生成观点后相加，如果为正则看多股票，否则看空。

## 板块轮动

参考研报《周期视角下的行业轮动实证分析》

首先对各一级行业对数收益同比序列 $ln(\frac{S_{t+12}}{S_t})$ 进行kmeans聚类，可以聚为周期上游、周期中游、周期下游、金融、消费、成长六类。

对六大类进行傅里叶变换，发现有共同周期21个月、42个月、100个月。对六大板块等权指数提取上述三周期的曲线，进行三因子回归，预测板块收益率并进行轮动。

## 组合优化

采用风险预算模型确定最终资产占比

**风险预算模型：** 风险预算模型 事先给定不同资产的风险预算，以极小化各资产的风险贡献与预算的差为目标，计算得到各个资产的权重。

设资产权重为$w = (w_1,w_2,\cdots,w_N)^T$, $R(w)$为组合的风险。定义资产 $i$ 的风险贡献为
$$ RC_i(w) = w_i\frac{\partial{R(w)}}{\partial{w_i}} $$.
给定各个资产的风险预算占比 $b = (b_1,b_2,\cdots,b_N),$ 问题为求解如下的优化模型：
$$ \begin{aligned}
\min\limits_{w} f(w;b) = \Sigma^N_1\left(w_i\frac{\partial{R(w)}}{\partial{w_i}}-b_iR(w)\right)^2
\end{aligned}$$
组合风险$R(w) = \sqrt{w^T\Sigma w}$中协方差矩阵的估计：采用半衰指数加权平均的方法，对靠近当前日期的数据赋予更高的权重，并使用Newey-West调整修正异方差和自相关性。

## 最终配置方法

首先择时判断股票上的多空观点，看多时风险预算模型中股债风险预算比例为进攻型30:1,稳健型20:1,保守型10:1，看空时股债风险预算比例为1:1。然后利用板块轮动模型预测下期收益率最高的板块，将股票权重分配给该板块。

# 华泰周期轮动基金组合改进版

## 改进一：基金筛选

落地配置时，将原来选择的A类份额换为C类份额。基金选择标准由跟踪误差小改为规模大

## 改进二：组合优化

求解优化问题时，将算法从SQP（序列二次规划）换为牛顿法和CCD（循环坐标下降法）

## 改进三：风险控制

原组合看多时股债风险预算配比相同，但当股票市场位置不同时，组合的波动可能相差很大。因此引入波动率预测，根据预测结果对权重进行缩放，波动大时降低仓位保留现金，波动小时加杠杆，使得所有情况下组合波动率小于预先给定的目标。另外，波动率预测基于过去的波动率水平，如果过去市场波动率低时加杠杆，但后续市场波动变大，则组合实际波动率可能大于目标，因此需要对杠杆倍数设定上限。
